version: '3.8'
services:
  devcontainer:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        BASE_IMAGE: "${DOCKER_LOCAL_REGISTRY}/development"
    image: ${DOCKER_LOCAL_REGISTRY}/vscode-pybackpack
    environment:
      REDIS_URL: ${REDIS_URL}
    volumes:
      # Mount from the root to access .git in the vscode running in the container.
      - ../../..:/workspace:cached
      - ${WORKSPACE}/data:/data:cached
    command: sleep infinity
    networks:
      - pybackpack_network

networks:
  pybackpack_network:
    driver: bridge
